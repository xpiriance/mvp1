<!DOCTYPE html>
<html>
<head>
    <title>Xpiriance</title>

    <!-- These are fixed css and js files need to include in every page -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>  -->
    <link type="text/css" rel="stylesheet" href="static/css/materialize.min.css"  media="screen,projection"/>
    <script type="text/javascript" src="static/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="static/js/materialize.min.js"></script>
    <!-- <script type="text/javascript" src="../static/js/stickyfill.js"></script> -->
    <link rel="stylesheet" href="static/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="static/css/font-awesome.css"/>
     

    
    <!-- These are required css files used in this page -->
    <link type="text/css" rel="stylesheet" href="static/css/main.css">

    <!-- These are required js files used in this page -->
    <script type="text/javascript" src="static/js/main.js"></script>

    <style type="text/css">
    	.logo{
			float: left;
			padding: 20px;
		}

		img.logo{
			width: 25%;
		}

		.top_head{
			font-weight: 500;
			font-size: 45px;
			text-align: center;
			color: #424242;
			font-family: bold;
			padding: 0px;
			margin-top: 0px;
		}

		.top_write{
			font-size: 18px;
			color: #616161;
			font-weight: 450;
		}

		.content{
			margin-top: 20px;
		}

		input::placeholder{
			color: #9e9e9e;
		}

		.login_btn{
			margin-top: 20px;
			background-color: #78909c;
			text-transform: capitalize;
			font-size: 18px;
			border-radius: 20px 20px;
		}


		#footer{
			margin-top: 40px;
		}

		@media only screen and (max-width: 600px){
			img.logo{
				width: 75%;
			}
		}
    </style>
    

</head>

<body>

	<div class="row">

		<div class="col l12 s12 logo">
			<img class="responsive-img logo" src="static/images/logo.png">
		</div>

		<div class="col l12 s12 content">

			<div class="col l6 s12">
				<h4 class="col s12 l12 top_head">Someone Can Solve Your Problem</h4>
				<h6 class="col s12 l12 top_write">Register yourself on this platform and connect with our experts. Here you'll get solution of every problem.</h6>

				<form class="col l8 offset-l2 s12" action="post" style="margin-top: 20px;">

	                <div class="col l12 s12 field-wrap input-field">
	                    <input class="login_email" id="login_email" name="email" Placeholder="Enter your email" type="text" required  title="Please enter your email or username" style="border-bottom: 0.18em solid #9e9e9e;">
	                </div>
	                <div class="col l12 s12 field-wrap input-field">
	                    <input class="login_password" type="password" id="login_password-field" required autocomplete="off" placeholder="Enter your password"  title="Please enter password" name="password"  style="border-bottom: 0.18em solid #9e9e9e;">
	                </div>
	                <div class="btn col l4 offset-l4 s8 offset-s2 login_btn">Login</div>
				</form>

			</div>

			<div class="col l6 s12 video_container">
	    		<iframe width="100%" height="350" src="https://www.youtube.com/embed/b5hiQJFEsjU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen style="box-shadow: 2px 2px 10px black;">
	    		</iframe>
	        </div>

		</div>

		<div id="footer" class="col l12 m12">
			<div class="col s10 offset-s1">
				<img class="responsive-img" src="static/images/image.png" width="100%">
			</div>
		</div>

	</div>
	

	<script type="text/javascript">

		function getCookie(name) {
		    var cookieValue = null;
		    if (document.cookie && document.cookie != '') {
		        var cookies = document.cookie.split(';');
		        for (var i = 0; i < cookies.length; i++) {
		            var cookie = jQuery.trim(cookies[i]);
		            if (cookie.substring(0, name.length + 1) == (name + '=')) {
		                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
		                break;
		            }
		        }
		    }
		    return cookieValue;
		}

		var csrftoken = getCookie('csrftoken');

		$(".login_btn").click(function(){
	    	var x1 = document.getElementById("login_email").value;
	    	var x2 = document.getElementById("login_password").value;
	    	var ideal_email = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;

	    	if(!x1.match(ideal_email)){
	            alert("Please enter valid email address");
	        }
	        else if(x2 == ""){
	        	alert("Please enter your password");
	        }
	        else{
	        	var login_data = {
			        user_email : document.getElementById("login_email").value,
			        user_password : document.getElementById("login_password").value,
			        csrfmiddlewaretoken : csrftoken,
			    }
			    console.log(login_data);
			    send_login_details(login_data);
	        }
	    });


		function send_login_details(request_data){
		    $.ajax({
		        url :  'http://127.0.0.1:8000/login_data/',
		        type : "POST",
		        data : request_data,
		        success : function(response_data){
		            console.log("You entered correct details");
		            window.location.assign("http://127.0.0.1:8000/")
		        },
		        error : function(xhr,errmsg,err){
		            console.log(xhr.status + ": " + xhr.responseText);
		        }
		    });
		}

	</script>

</body>
</html>
